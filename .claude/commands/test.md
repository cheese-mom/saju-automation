---
description: Phase 4 - 테스트 및 통합 에이전트
---

# 사주 자동화 테스트 및 통합 에이전트

당신은 **테스트 및 품질 보증 전문 에이전트**입니다.

## 주요 임무

@TODO.md 의 **Phase 4: 통합 및 테스트** 섹션의 모든 작업을 완료하세요.

## 수행할 작업

### 1. 기능 테스트

**종합 사주 플로우 테스트:**
1. 사주 생성 페이지 접속
2. "종합 사주" 선택
3. LLM 선택 (Gemini 및 GPT 각각 테스트)
4. 고객 정보 입력:
   - 이름: "홍길동"
   - 명식표: 샘플 데이터 입력
   - 추가 질문: "건강은 어떤가요?"
5. "생성 시작" 클릭
6. 결과 확인:
   - 8개 섹션이 올바르게 생성되는지
   - 목차가 정확한지
   - 클립보드 복사 동작 확인

**진로 사주 플로우 테스트:**
- 위와 동일하되 "진로 사주" 선택

**프롬프트 관리 플로우 테스트:**
1. 프롬프트 관리 페이지 접속
2. "종합 사주" 선택
3. 프롬프트 목록 로드 확인
4. 프롬프트 편집:
   - 1번 프롬프트 편집 버튼 클릭
   - 내용 수정
   - 저장
5. 새로고침 후 변경 사항 확인

### 2. 건너뛰기 로직 테스트

**테스트 시나리오:**
1. 프롬프트 관리에서 3번 프롬프트를 비우기
2. 사주 생성 실행
3. 결과 확인:
   - 3번 섹션이 제외되었는지
   - 목차에 3번이 없는지
   - 콘솔에 "⏭ 프롬프트 3번 건너뛰기" 로그 확인

**복원:**
- 테스트 후 3번 프롬프트 원래대로 복원

### 3. LLM 전환 테스트

**Gemini ↔ GPT 전환:**
1. 동일한 입력으로 Gemini 실행
2. 결과 저장
3. 동일한 입력으로 GPT 실행
4. 결과 저장
5. 두 결과 비교 (형식, 길이, 품질)

### 4. 에러 시나리오 테스트

**API 키 오류:**
1. `.env.local`에서 `GEMINI_API_KEY` 제거
2. Gemini로 사주 생성 시도
3. 에러 메시지 확인: "API 키가 설정되지 않았습니다."
4. API 키 복원

**구글 시트 연결 오류:**
1. `GOOGLE_SHEET_ID`를 잘못된 값으로 변경
2. 프롬프트 로드 시도
3. 에러 메시지 확인
4. 올바른 값으로 복원

**필수 필드 누락:**
1. 이름 없이 사주 생성 시도
2. 유효성 검증 메시지 확인
3. 명식표 없이 시도
4. 유효성 검증 메시지 확인

**네트워크 오류 시뮬레이션:**
1. 개발자 도구에서 네트워크 차단
2. API 호출 시도
3. 에러 처리 확인

### 5. 성능 테스트

**API 응답 시간 측정:**
- 각 API 엔드포인트 응답 시간 기록
- `/api/prompts`: 목표 < 2초
- `/api/generate`: LLM 호출 포함, 최대 5분

**대용량 텍스트 처리:**
1. 매우 긴 명식표 입력 (5000자 이상)
2. 정상 처리 확인
3. UI 렌더링 확인

**동시 요청 테스트:**
- 여러 브라우저 탭에서 동시에 사주 생성
- 각각 독립적으로 처리되는지 확인

### 6. UI/UX 테스트

**반응형 디자인:**
- 데스크톱 (1920px)
- 태블릿 (768px)
- 모바일 (375px)
- 각 화면 크기에서 레이아웃 확인

**브라우저 호환성:**
- Chrome
- Safari
- Firefox
- Edge

**접근성:**
- 키보드만으로 네비게이션 가능한지
- Tab 키로 모든 요소 접근 가능한지
- Enter 키로 버튼 활성화 가능한지

### 7. 통합 테스트 체크리스트

- [ ] 종합 사주 전체 플로우 (Gemini)
- [ ] 종합 사주 전체 플로우 (GPT)
- [ ] 진로 사주 전체 플로우 (Gemini)
- [ ] 진로 사주 전체 플로우 (GPT)
- [ ] 프롬프트 편집 및 저장
- [ ] 건너뛰기 로직 (빈 프롬프트)
- [ ] API 키 오류 처리
- [ ] 구글 시트 연결 오류 처리
- [ ] 필수 필드 검증
- [ ] 클립보드 복사 기능
- [ ] 반응형 디자인 (3가지 화면 크기)
- [ ] 로딩 상태 표시
- [ ] 에러 메시지 표시

## 작업 완료 후

1. **TODO.md 업데이트**: Phase 4의 모든 체크박스를 완료 처리
2. **테스트 결과 문서 작성** (선택사항):
   - 테스트한 항목
   - 발견한 버그 (있다면)
   - 성능 측정 결과
3. **버그 수정**:
   - 발견된 모든 버그 수정
   - 재테스트
4. **사용자에게 보고**:
   - 테스트 완료 항목
   - 발견/수정된 이슈
   - 다음 단계 안내 (Phase 5: `/deploy` 실행)

## 주의사항

- 테스트 전 `.env.local`을 백업하세요
- 프롬프트 변경 시 원래 값을 기록해두세요
- 실제 API 키를 사용하므로 비용이 발생할 수 있습니다
- 테스트 후 모든 설정을 원래대로 복원하세요

## 참고 문서
- @CLAUDE.md - 전체 아키텍처
- @prd.md - 전체 요구사항
- @TODO.md - Phase 4 상세 작업
